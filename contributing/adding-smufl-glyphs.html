<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/assets/images/verovio-logo-big.png"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="/assets/css/bootstrap/css/bootstrap.min.css" type="text/css" /><!-- Optional theme -->
        <link rel="stylesheet" href="/assets/css/bootstrap/css/bootstrap-theme.min.css" type="text/css" />
        <link rel="stylesheet" href="/assets/css/fileinput.min.css" />

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/assets/css/syntax.css" />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/assets/css/verovio.css" />
        <link rel="stylesheet" href="/assets/css/midiplayer.css" />

        <link rel="stylesheet" href="/css/verovio-site.css" />

        <script src="/assets/javascript/jquery-3.6.0.min.js"></script>
        <script src="/assets/javascript/bootstrap.min.js"></script>

        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Adding SMuFL glyphs | Reference book for Verovio</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Adding SMuFL glyphs" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="All SMuFL glyphs used by Verovio have to be available in the Leipzig font. For adding support for a new SMuFL glyph, the steps are:" />
<meta property="og:description" content="All SMuFL glyphs used by Verovio have to be available in the Leipzig font. For adding support for a new SMuFL glyph, the steps are:" />
<meta property="og:site_name" content="Reference book for Verovio" />
<meta property="og:image" content="https://book.verovio.org/images/card.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-04-15T06:48:38+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://book.verovio.org/images/card.png" />
<meta property="twitter:title" content="Adding SMuFL glyphs" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-04-15T06:48:38+00:00","datePublished":"2025-04-15T06:48:38+00:00","description":"All SMuFL glyphs used by Verovio have to be available in the Leipzig font. For adding support for a new SMuFL glyph, the steps are:","headline":"Adding SMuFL glyphs","image":"https://book.verovio.org/images/card.png","mainEntityOfPage":{"@type":"WebPage","@id":"/contributing/adding-smufl-glyphs.html"},"url":"/contributing/adding-smufl-glyphs.html"}</script>
<!-- End Jekyll SEO tag -->

    </head>
    <body>

        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
     <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </button>
            <a class="navbar-brand logo-nav" href="https://www.verovio.org/index.xhtml">
                <img alt="Verovio logo" src="/assets/images/verovio-fadded-50.png" />
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                <li >
                    <a href="https://www.verovio.org/index.xhtml">Homepage</a>
                </li>
                <li class="active">
                    <a href="https://book.verovio.org/">Reference book</a>
                </li>
                <li >
                    <a href="https://www.verovio.org/musicxml.html">Online tools</a>
                </li>
                <li>
                    <a class="image" href="https://github.com/rism-digital/verovio"><img alt="Verovio logo" src="/assets/images/github-logo.png" /></a>
                </li>
              </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


        <div class="top-header"> 
    <div class="container" style="color: #eee; height: 140px; padding-top: 5px;">
        <h1 style="color: #eee;" class="hidden-print hidden-xs">A music notation engraving library</h1> 
        <h3 style="color: #eee;" class="hidden-print visible-xs">A music notation engraving library</h3> 
        <p class="hidden-print">Designed for the Music Encoding Initiative - Fast - Light - Flexible - No dependencies</p>
    </div>
</div>


        <div class="container with-footer">

            



<div class="row">
    <div class="col-md-3 sidebar-offcanvas" id="sidebar">
        <div class="toc-group">
            <div>

    <a class="toc-item" href="/introduction/">Introduction</a>
    

    <a class="toc-item" href="/first-steps/">Tutorial 1: First Steps</a>
    

    <a class="toc-item" href="/interactive-notation/css-and-svg.html">Tutorial 2: Interactive notation</a>
    

    <a class="toc-item" href="/advanced-topics/">Beyond tutorials: Advanced topics</a>
    

    <a class="toc-item" href="/toolkit-reference/input-formats.html">Toolkit Reference</a>
    

    <a class="toc-item" href="/installing-or-building-from-sources/command-line.html">Installing or building from sources</a>
    

    <a class="toc-item" href="/contributing/guidelines.html">Contributing</a>
    
        
        
<a class="toc-item toc-section " href="/contributing/guidelines.html">Coding guidelines</a>
    

<a class="toc-item toc-section " href="/contributing/workflow.html">Contributing workflow</a>
    

<a class="toc-item toc-section " href="/contributing/generate-code-with-libmei.html">Generate code with LibMEI</a>
    

<a class="toc-item toc-section selected" href="/contributing/adding-smufl-glyphs.html">Adding SMuFL glyphs</a>
    
        
        
    

    

</div>
            <div id="website-search-form" class="toc-item search-form">
    
    <form action="/search.html">
        <div class="form-group">
            <input id="website-search" class="form-control" type="text" name="q" placeholder="Search the reference book ...">
        </div>
        <button type="submit" class="btn btn-small">Search</button>
    </form>
</div>


        </div>
    </div>

    <div class="col-md-9" id="content">
        
        <a class="hidden-print" href="https://github.com/rism-digital/verovio-reference-book/edit/master/_book/07-contributing/05-adding-smufl-glyphs.md"><button class="btn btn-xs pull-right">Edit this page</button></a>
        
        
        <h2>Adding SMuFL glyphs</h2>
        <p>All SMuFL glyphs used by Verovio have to be available in the <a href="https://github.com/rism-digital/leipzig">Leipzig</a> font. For adding support for a new SMuFL glyph, the steps are:</p>

<ol>
  <li>Add the glyph to the Leipzig font file</li>
  <li>Generate the Leipzig in various format and the metadata with the script available in <a href="https://github.com/rism-digital/leipzig">Leipzig</a> repository</li>
  <li>Add the glyph to the list of supported glyph in the XML list and re-generate the fonts.</li>
</ol>

<p>Make sure you always add glyphs <strong>only</strong> in the <a href="https://github.com/rism-digital/leipzig">Leipzig</a> font. Because conflict solving is quickly very when adding a glyph (in particular with the binary font files), make sure you always pull the latest version of the font file branch before starting your work and do not wait too long before making a PR. If changes have been made in between, you will need to add your glyphs again.</p>

<p>When making a PR, always add an image (e.g., screenshot of FontForge) showing the glyphs.</p>

<h4 id="adding-the-glyph-to-the-leipzig-font-file">Adding the glyph to the Leipzig font file</h4>

<p>The file to modify is <code class="language-plaintext highlighter-rouge">./Leipzig.sfd</code> and should be edited with <a href="https://fontforge.org/">FontForge</a>. Very often it is possible to copy another existing glyph as basis for the new glyph. Leipzig is visually lighter and thinner than Bravura and new glyphs have to follow this design choice. <strong>Do not simply copy glyphs from Bravura.</strong> Make sure the font is valid by running “Element =&gt; “Find Problems…”.</p>

<p>Once the new glyph(s) has/have been added, you also need to change the version number in the font info (menu “Element” =&gt; “Font Info” and then tab “PS Names” in fields “Version” and “Copyright” and tab “FONTLOG” where you also need to add a comment together with the version number. The file can be saved.</p>

<h4 id="generate-other-font-formats-and-the-metadata">Generate other font formats and the metadata</h4>

<p>Once the <code class="language-plaintext highlighter-rouge">./Leipzig.sfd</code> has been modify and saved, you have to run the <code class="language-plaintext highlighter-rouge">./generate_font.py</code> script that will generate different font formats and the metadata. You are now ready to make a PR to the <a href="https://github.com/rism-digital/leipzig">Leipzig</a> repository.</p>

<h4 id="add-the-glyph-to-the-list-of-supported-glyph-in-the-xml-list-and-re-generate-the-fonts">Add the glyph to the list of supported glyph in the XML list and re-generate the fonts</h4>

<p>Once the PR to the <a href="https://github.com/rism-digital/leipzig">Leipzig</a> repository has been approved and merged, the new glyphs have to be added to the Verovio codebase. The first thing to do is to add them to the list of glyphs supported by Verovio.</p>

<p>Open the file <code class="language-plaintext highlighter-rouge">./fonts/supported.xml</code> and uncomment the glyph(s) you added to Leipzig. The XML file is then used to extract the glyphs supported by Verovio.</p>

<p>To do so, you need to copy to <code class="language-plaintext highlighter-rouge">./fonts/Leipzig</code> the new Leipzig files:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Leipzig.woff2</code></li>
  <li><code class="language-plaintext highlighter-rouge">Leipzig.ttf</code></li>
  <li><code class="language-plaintext highlighter-rouge">Leipzig.svg</code></li>
  <li><code class="language-plaintext highlighter-rouge">leipzig_metadata.json</code></li>
</ul>

<p>The glyphs will be extracted from the SVG font by running the script <code class="language-plaintext highlighter-rouge">./fonts/generate_all.sh</code> (from <code class="language-plaintext highlighter-rouge">./fonts/</code>). This will extract all the glyphs from the SVG font file and calculate the their bounding boxes. When this is done you will see your glyphs in <code class="language-plaintext highlighter-rouge">./data/</code> and in <code class="language-plaintext highlighter-rouge">./include/vrv/smufl.h</code>. The CSS font files will also be updated.</p>

    </div>
</div>

<script src="/js/highlighter.js"></script>

<script>
    let options = {
        rootMargin: '60px'
    }
    function adjustSideBar() {
        elem = document.getElementsByClassName("toc-group")[0];
        // 992 is the breakpoint for which the sidebar moves to the top; 35 is the footer height
        elem.style.height = (window.innerWidth < 992) ? "" : `${window.innerHeight - elem.offsetTop - 35}px`;
    }

    window.onresize = function () {
        adjustSideBar();
    };
    window.onload = function() {
        adjustSideBar();
    };

    window.addEventListener('DOMContentLoaded', () => {
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('id');
                if (entry.intersectionRatio > 0) {
                    // First deselect everything
                    sections = document.querySelectorAll(`.toc-group a.toc-subsection`);
                    for (i = 0; i < sections.length; i++){
                        sections[i].classList.remove('selected');
                    }
                    // The one entering is marked as .on-screen
                    document.querySelector(`.toc-group a[href="#${id}"]`).classList.add('on-screen');
                    // Select the first that in .on-screen
                    sections = document.querySelectorAll(`.toc-group a.toc-subsection.on-screen`);
                    sections[0].classList.add('selected');

                } else {
                    leaving = document.querySelector(`.toc-group a[href="#${id}"]`)
                    // Remove the .on-screen from the one leaving
                    leaving.classList.remove('on-screen');
                    sections = document.querySelectorAll(`.toc-group a.toc-subsection.on-screen`);
                    // If no other one is on screen, just leave things as they are
                    if (sections.length > 0) {
                        // Otherwise de-select the one that is leaving
                        leaving.classList.remove('selected');
                        // Selected the first .on-screen one and de-select the other ones
                        sections[0].classList.add('selected');
                        for (i = 1; i < sections.length; i++){
                            console.log(sections[i].getAttribute('id'))
                            sections[i].classList.remove('selected');
                        }
                    }
                }
            });
        }, options);

        // Track all sections that have an `id` applied
        document.querySelectorAll('h3[id]').forEach((section) => {
            observer.observe(section);
        });

    });

    let params = new URLSearchParams( document.location.search.substring( 1 ) );
    if ( params.get( "q" ) )
    {
        let query = params.get( "q" );
        // Also make sure we preserve the query term in the form in the sidebar
        document.getElementById("website-search").value = query;
        // Preserve the original query for logging
        let query_term = query;
        // Remove quotes and trim
        query = query.replace(/\'|\"/g, ' ');
        query = query.trim();
        // Make it an AND query
        console.log(query);

        let terms = query.split(' ');
        var container = document.getElementById("content");

        for (var i = 0; i < terms.length; i++) {
            InstantSearch.highlight(container, terms[i]);
        }
    }

</script>



        </div>

        <footer class="hidden-print footer navbar-fixed-bottom">
            <p>
                
            </p>
        </footer>

        <script>
        //<![CDATA[
            $(document).ready(function() {

                

            });
        //]]>
        </script>
    </body>
</html>
